<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dramkit &mdash; DramKit 0.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="backpacks" href="dramkit.backpacks.html" />
    <link rel="prev" title="Welcome to DramKit’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> DramKit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">dramkit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-dramkit.datetimetools">datetimetools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#str2datetime">str2datetime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#str2timestamp">str2timestamp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timestamp2str">timestamp2str</a></li>
<li class="toctree-l3"><a class="reference internal" href="#datetime-now">datetime_now</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-date-format">get_date_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-year-month">get_year_month</a></li>
<li class="toctree-l3"><a class="reference internal" href="#today-date">today_date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#today-month">today_month</a></li>
<li class="toctree-l3"><a class="reference internal" href="#today-quarter">today_quarter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-reformat-simple">date_reformat_simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-reformat-chn">date_reformat_chn</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-reformat">date_reformat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date8-to-date10">date8_to_date10</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date10-to-date8">date10_to_date8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-add-nday">date_add_nday</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diff-days-date">diff_days_date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-dates-between">get_dates_between</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-dayofweek">get_dayofweek</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-dayofyear">get_dayofyear</a></li>
<li class="toctree-l3"><a class="reference internal" href="#isworkday-chncal">isworkday_chncal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-recent-workday-chncal">get_recent_workday_chncal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-next-nth-workday-chncal">get_next_nth_workday_chncal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-recent-inweekday-chncal">get_recent_inweekday_chncal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-next-nth-inweekday-chncal">get_next_nth_inweekday_chncal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cut-date">cut_date</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diff-workdays-date">diff_workdays_date</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-dramkit.gentools">gentools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#structureobject">StructureObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-used-time">log_used_time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#print-used-time">print_used_time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-update-kwargs">get_update_kwargs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#roulette-base">roulette_base</a></li>
<li class="toctree-l3"><a class="reference internal" href="#roulette-stochastic-accept">roulette_stochastic_accept</a></li>
<li class="toctree-l3"><a class="reference internal" href="#roulette-count">roulette_count</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rand-sum">rand_sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rand-weight-sum">rand_weight_sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replace-repeat-iter">replace_repeat_iter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replace-repeat-pd">replace_repeat_pd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replace-repeat-func-iter">replace_repeat_func_iter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replace-repeat-func-pd">replace_repeat_func_pd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#con-count">con_count</a></li>
<li class="toctree-l3"><a class="reference internal" href="#con-count-ignore">con_count_ignore</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-preval-func-cond">get_preval_func_cond</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gap-count">gap_count</a></li>
<li class="toctree-l3"><a class="reference internal" href="#count-between-gap">count_between_gap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#count-between-gap-pd">count_between_gap_pd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#count-between-gap-iter">count_between_gap_iter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#val-gap-cond">val_gap_cond</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-by-func-prenext">filter_by_func_prenext</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-by-func-prenext-series">filter_by_func_prenext_series</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merge-df">merge_df</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cut-df-by-con-val">cut_df_by_con_val</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-con-start-end">get_con_start_end</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cut-range-to-subs">cut_range_to_subs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-l-allin-l0">check_l_allin_l0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#check-exist-data">check_exist_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#isnull">isnull</a></li>
<li class="toctree-l3"><a class="reference internal" href="#x-div-y">x_div_y</a></li>
<li class="toctree-l3"><a class="reference internal" href="#power">power</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cal-pct">cal_pct</a></li>
<li class="toctree-l3"><a class="reference internal" href="#min-com-multer">min_com_multer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#max-com-divisor">max_com_divisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mcd2-tad">mcd2_tad</a></li>
<li class="toctree-l3"><a class="reference internal" href="#max-com-divisor-tad">max_com_divisor_tad</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-appear-order">get_appear_order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#label-rep-index-str">label_rep_index_str</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drop-index-duplicates">drop_index_duplicates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-shift">group_shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-fillna">group_fillna</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-rank">group_rank</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bootstrapping">bootstrapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#groupby-rolling-func">groupby_rolling_func</a></li>
<li class="toctree-l3"><a class="reference internal" href="#link-lists">link_lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-num-decimal">get_num_decimal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-dramkit.install_check">install_check</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">install_check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-dramkit.iotools">iotools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pickle-file">pickle_file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unpickle-file">unpickle_file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-json">load_json</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-json">write_json</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-lines">read_lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-txt">write_txt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-text">load_text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-csv">load_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-csvs">load_csvs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-excels">load_excels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-all-files">get_all_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-files">zip_files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-fpath">zip_fpath</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-fpaths">zip_fpaths</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-extract">zip_extract</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-fpath-7z">zip_fpath_7z</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zip-fpaths-7z">zip_fpaths_7z</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extract-7z">extract_7z</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cmdrun">cmdrun</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rename-files-in-dir">rename_files_in_dir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#del-dir">del_dir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-file">copy_file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-dir">copy_dir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#find-files-include-str">find_files_include_str</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.backpacks.html">backpacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.datsci.html">datsci</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.find_addends.html">find_addends</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.fintools.html">fintools</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.logtools.html">logtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.optimizer.html">optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.other.html">other</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.plottools.html">plottools</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.pystyles.html">pystyles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.sorts.html">sorts</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.speedup.html">speedup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.sqltools.html">sqltools</a></li>
<li class="toctree-l1"><a class="reference internal" href="dramkit.webtools.html">webtools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DramKit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>dramkit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/dramkit.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dramkit">
<h1>dramkit<a class="headerlink" href="#dramkit" title="Permalink to this headline"></a></h1>
<section id="module-dramkit.datetimetools">
<span id="datetimetools"></span><h2>datetimetools<a class="headerlink" href="#module-dramkit.datetimetools" title="Permalink to this headline"></a></h2>
<section id="str2datetime">
<h3>str2datetime<a class="headerlink" href="#str2datetime" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.str2datetime">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">str2datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tstr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strformat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%Y-%m-%d'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.str2datetime" title="Permalink to this definition"></a></dt>
<dd><p>时间字符串转datetime格式</p>
</dd></dl>

</section>
<section id="str2timestamp">
<h3>str2timestamp<a class="headerlink" href="#str2timestamp" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.str2timestamp">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">str2timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strformat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.str2timestamp" title="Permalink to this definition"></a></dt>
<dd><p>时间字符串转时间戳(精确到秒)</p>
</dd></dl>

</section>
<section id="timestamp2str">
<h3>timestamp2str<a class="headerlink" href="#timestamp2str" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.timestamp2str">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">timestamp2str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strformat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.timestamp2str" title="Permalink to this definition"></a></dt>
<dd><p>时间戳转化为字符串</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>str</em><em>, </em><em>int</em><em>, </em><em>float</em>) – <div class="line-block">
<div class="line">时间戳，可为数字字符串、整数或浮点数</div>
<div class="line">当t取整后位数小于等于10位时，精度按秒处理</div>
<div class="line">当t取整后位数大于10位小于等于13位时，精度按毫秒处理</div>
<div class="line">当t取整后位数大于13位时，精度按微秒处理</div>
</div>
</p></li>
<li><p><strong>strformat</strong> (<em>str</em><em>, </em><em>None</em>) – 返回时间格式，默认 <code class="docutils literal notranslate"><span class="pre">%Y-%m-%d</span> <span class="pre">%H:%M:%S</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>str</cite> - 字符串格式时间</p>
</dd>
</dl>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<div class="line-block">
<div class="line">正常到秒级别的时间戳为10位整数</div>
<div class="line">到毫秒/千分之一秒(milliseconds)级别的时间戳为13位整数</div>
<div class="line">到微秒/百万分之一秒(microseconds)级别的时间戳为16位整数</div>
</div>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>纳秒级别精度添加</p>
</div>
</dd></dl>

</section>
<section id="datetime-now">
<h3>datetime_now<a class="headerlink" href="#datetime-now" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.datetime_now">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">datetime_now</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strformat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.datetime_now" title="Permalink to this definition"></a></dt>
<dd><p>获取当前时间日期</p>
</dd></dl>

</section>
<section id="get-date-format">
<h3>get_date_format<a class="headerlink" href="#get-date-format" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_date_format">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_date_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['</span> <span class="pre">',</span> <span class="pre">'-',</span> <span class="pre">'/',</span> <span class="pre">'*',</span> <span class="pre">'#',</span> <span class="pre">'&#64;',</span> <span class="pre">'.',</span> <span class="pre">'_']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_date_format" title="Permalink to this definition"></a></dt>
<dd><p>判断日期格式位，返回日期位数和连接符</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>str</em>) – 表示日期的字符串</p></li>
<li><p><strong>joiners</strong> (<em>list</em>) – <p>支持的格式连接符，不支持的连接符可能报错或返回’未知日期格式’</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>注：若date无格式连接符，则只判断8位的格式，如’20200220’</p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple - (日期位数（可能为date字符串长度或’未知日期格式’）, 格式连接符（或None）)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-year-month">
<h3>get_year_month<a class="headerlink" href="#get-year-month" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_year_month">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_year_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_year_month" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">提取date中的年月</div>
<div class="line">例：’20200305’—&gt;’202003’, ‘2020-03-05’—&gt;’2020-03’</div>
</div>
</dd></dl>

</section>
<section id="today-date">
<h3>today_date<a class="headerlink" href="#today-date" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.today_date">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">today_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['%']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.today_date" title="Permalink to this definition"></a></dt>
<dd><p>获取今日日期，格式由连接符joiner确定，forbid_joiners指定禁用的连接符</p>
</dd></dl>

</section>
<section id="today-month">
<h3>today_month<a class="headerlink" href="#today-month" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.today_month">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">today_month</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['%']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.today_month" title="Permalink to this definition"></a></dt>
<dd><p>获取今日所在年月</p>
</dd></dl>

</section>
<section id="today-quarter">
<h3>today_quarter<a class="headerlink" href="#today-quarter" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.today_quarter">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">today_quarter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Q'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.today_quarter" title="Permalink to this definition"></a></dt>
<dd><p>获取今日所在季度</p>
</dd></dl>

</section>
<section id="date-reformat-simple">
<h3>date_reformat_simple<a class="headerlink" href="#date-reformat-simple" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date_reformat_simple">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date_reformat_simple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner_ori</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner_new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['%']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date_reformat_simple" title="Permalink to this definition"></a></dt>
<dd><p>时间格式简单转化</p>
</dd></dl>

</section>
<section id="date-reformat-chn">
<h3>date_reformat_chn<a class="headerlink" href="#date-reformat-chn" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date_reformat_chn">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date_reformat_chn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['%']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date_reformat_chn" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">指定连接符为joiner，重新格式化date，date格式为x年x月x日.</div>
<div class="line">forbid_joiners指定禁用的连接符</div>
</div>
</dd></dl>

</section>
<section id="date-reformat">
<h3>date_reformat<a class="headerlink" href="#date-reformat" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date_reformat">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date_reformat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forbid_joiners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['%']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date_reformat" title="Permalink to this definition"></a></dt>
<dd><p>指定连接符为joiner，重新格式化date，forbid_joiners指定禁用的连接符</p>
</dd></dl>

</section>
<section id="date8-to-date10">
<h3>date8_to_date10<a class="headerlink" href="#date8-to-date10" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date8_to_date10">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date8_to_date10</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date8_to_date10" title="Permalink to this definition"></a></dt>
<dd><p>8位日期转换为10位日期，连接符为joiner</p>
</dd></dl>

</section>
<section id="date10-to-date8">
<h3>date10_to_date8<a class="headerlink" href="#date10-to-date8" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date10_to_date8">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date10_to_date8</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date10_to_date8" title="Permalink to this definition"></a></dt>
<dd><p>10位日期转换为8位日期</p>
</dd></dl>

</section>
<section id="date-add-nday">
<h3>date_add_nday<a class="headerlink" href="#date-add-nday" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.date_add_nday">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">date_add_nday</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.date_add_nday" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">在给定日期date上加上n天（减去时n写成负数即可）</div>
<div class="line">日期输入输出符合get_date_format函数支持的格式</div>
</div>
</dd></dl>

</section>
<section id="diff-days-date">
<h3>diff_days_date<a class="headerlink" href="#diff-days-date" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.diff_days_date">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">diff_days_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.diff_days_date" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">计算两个日期间相隔天数，若date1大于date2，则输出为正，否则为负</div>
<div class="line">日期输入输出符合get_date_format函数支持的格式</div>
</div>
</dd></dl>

</section>
<section id="get-dates-between">
<h3>get_dates_between<a class="headerlink" href="#get-dates-between" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_dates_between">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_dates_between</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_workday</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_weekend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">joiner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_dates_between" title="Permalink to this definition"></a></dt>
<dd><p>获取date1到date2之间的日期列表，keep1和keep2设置结果是否保留date1和date2</p>
</dd></dl>

</section>
<section id="get-dayofweek">
<h3>get_dayofweek<a class="headerlink" href="#get-dayofweek" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_dayofweek">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_dayofweek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_dayofweek" title="Permalink to this definition"></a></dt>
<dd><p>返回date属于星期几（1-7）</p>
</dd></dl>

</section>
<section id="get-dayofyear">
<h3>get_dayofyear<a class="headerlink" href="#get-dayofyear" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_dayofyear">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_dayofyear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_dayofyear" title="Permalink to this definition"></a></dt>
<dd><p>返回date属于一年当中的第几天（从1开始记）</p>
</dd></dl>

</section>
<section id="isworkday-chncal">
<h3>isworkday_chncal<a class="headerlink" href="#isworkday-chncal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.isworkday_chncal">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">isworkday_chncal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.isworkday_chncal" title="Permalink to this definition"></a></dt>
<dd><p>利用chinese_calendar库判断date（str格式）是否为工作日</p>
</dd></dl>

</section>
<section id="get-recent-workday-chncal">
<h3>get_recent_workday_chncal<a class="headerlink" href="#get-recent-workday-chncal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_recent_workday_chncal">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_recent_workday_chncal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'post'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_recent_workday_chncal" title="Permalink to this definition"></a></dt>
<dd><p>若date为工作日，则返回，否则返回下一个(post)或上一个(pre)工作日</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>若chinese_calendar库没更新，可能导致结果不准确</p>
</div>
</dd></dl>

</section>
<section id="get-next-nth-workday-chncal">
<h3>get_next_nth_workday_chncal<a class="headerlink" href="#get-next-nth-workday-chncal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_next_nth_workday_chncal">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_next_nth_workday_chncal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_next_nth_workday_chncal" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">给定日期date，返回其后第n个工作日日期，n可为负数（返回结果在date之前）</div>
<div class="line">若n为0，直接返回date</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>若chinese_calendar库没更新，可能导致结果不准确</p>
</div>
</dd></dl>

</section>
<section id="get-recent-inweekday-chncal">
<h3>get_recent_inweekday_chncal<a class="headerlink" href="#get-recent-inweekday-chncal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_recent_inweekday_chncal">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_recent_inweekday_chncal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'post'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_recent_inweekday_chncal" title="Permalink to this definition"></a></dt>
<dd><p>若date不是周末，则返回，否则返回下一个(post)或上一个(pre)周内日期</p>
</dd></dl>

</section>
<section id="get-next-nth-inweekday-chncal">
<h3>get_next_nth_inweekday_chncal<a class="headerlink" href="#get-next-nth-inweekday-chncal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.get_next_nth_inweekday_chncal">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">get_next_nth_inweekday_chncal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.get_next_nth_inweekday_chncal" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">给定日期date，返回其后第n个周内日日期，n可为负数（返回结果在date之前）</div>
<div class="line">若n为0，直接返回date</div>
</div>
</dd></dl>

</section>
<section id="cut-date">
<h3>cut_date<a class="headerlink" href="#cut-date" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.cut_date">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">cut_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.cut_date" title="Permalink to this definition"></a></dt>
<dd><p>以间隔为n天划分start_date和end_date之间日期子集</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="s1">&#39;20200201&#39;</span><span class="p">,</span> <span class="s1">&#39;20200225&#39;</span><span class="p">,</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cut_date</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="go">[[&#39;20200201&#39;, &#39;20200210&#39;],</span>
<span class="go"> [&#39;20200211&#39;, &#39;20200220&#39;],</span>
<span class="go"> [&#39;20200221&#39;, &#39;20200225&#39;]]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="diff-workdays-date">
<h3>diff_workdays_date<a class="headerlink" href="#diff-workdays-date" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.datetimetools.diff_workdays_date">
<span class="sig-prename descclassname"><span class="pre">dramkit.datetimetools.</span></span><span class="sig-name descname"><span class="pre">diff_workdays_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.datetimetools.diff_workdays_date" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">计算两个日期间相隔的工作日天数，若date1大于date2，则输出为正，否则为负</div>
<div class="line">日期输入输出符合get_date_format函数支持的格式</div>
</div>
</dd></dl>

</section>
</section>
<section id="module-dramkit.gentools">
<span id="gentools"></span><h2>gentools<a class="headerlink" href="#module-dramkit.gentools" title="Permalink to this headline"></a></h2>
<p>General toolboxs</p>
<section id="structureobject">
<h3>StructureObject<a class="headerlink" href="#structureobject" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="dramkit.gentools.StructureObject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">StructureObject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.StructureObject" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>类似于MATLAB结构数组，存放变量，便于直接赋值和查看</p>
<dl class="py method">
<dt class="sig sig-object py" id="dramkit.gentools.StructureObject.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.StructureObject.__init__" title="Permalink to this definition"></a></dt>
<dd><p>初始化</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dramkit.gentools.StructureObject.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.StructureObject.clear" title="Permalink to this definition"></a></dt>
<dd><p>清空所有属性变量</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dramkit.gentools.StructureObject.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.StructureObject.pop" title="Permalink to this definition"></a></dt>
<dd><p>删除属性变量key，有返回</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="dramkit.gentools.StructureObject.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.StructureObject.remove" title="Permalink to this definition"></a></dt>
<dd><p>删除属性变量key，无返回</p>
</dd></dl>

</dd></dl>

</section>
<section id="log-used-time">
<h3>log_used_time<a class="headerlink" href="#log-used-time" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.log_used_time">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">log_used_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.log_used_time" title="Permalink to this definition"></a></dt>
<dd><p>作为装饰器记录函数运行用时</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> (<em>None</em><em>, </em><em>logging.Logger</em>) – 日志记录器</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">dramkit</span> <span class="kn">import</span> <span class="n">simple_logger</span>
<span class="linenos">2</span><span class="n">logger</span> <span class="o">=</span> <span class="n">simple_logger</span><span class="p">()</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="nd">@log_used_time</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>
<span class="linenos">5</span><span class="k">def</span> <span class="nf">wait</span><span class="p">():</span>
<span class="linenos">6</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wait...&#39;</span><span class="p">)</span>
<span class="linenos">7</span>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wait</span><span class="p">()</span>
<span class="go">wait...</span>
<span class="go">2021-12-28 12:39:54,013 -utils_logger.py[line: 32] -INFO:</span>
<span class="go">    --function `wait` run time: 3.000383s.</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dramkit.gentools.print_used_time" title="dramkit.gentools.print_used_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.print_used_time()</span></code></a></p>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://www.cnblogs.com/xiuyou/p/11283512.html">https://www.cnblogs.com/xiuyou/p/11283512.html</a>
<a class="reference external" href="https://www.cnblogs.com/slysky/p/9777424.html">https://www.cnblogs.com/slysky/p/9777424.html</a>
<a class="reference external" href="https://www.cnblogs.com/zhzhang/p/11375574.html">https://www.cnblogs.com/zhzhang/p/11375574.html</a></p>
</dd></dl>

</section>
<section id="print-used-time">
<h3>print_used_time<a class="headerlink" href="#print-used-time" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.print_used_time">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">print_used_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.print_used_time" title="Permalink to this definition"></a></dt>
<dd><p>作为装饰器打印函数运行用时</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>function</em>) – 需要记录运行用时的函数</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nd">@print_used_time</span>
<span class="linenos">2</span><span class="k">def</span> <span class="nf">wait</span><span class="p">():</span>
<span class="linenos">3</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wait...&#39;</span><span class="p">)</span>
<span class="linenos">4</span>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wait</span><span class="p">()</span>
<span class="go">wait...</span>
<span class="go">function `wait` run time: 3.008314s.</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dramkit.gentools.log_used_time" title="dramkit.gentools.log_used_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.log_used_time()</span></code></a></p>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://www.cnblogs.com/slysky/p/9777424.html">https://www.cnblogs.com/slysky/p/9777424.html</a>
<a class="reference external" href="https://www.cnblogs.com/zhzhang/p/11375574.html">https://www.cnblogs.com/zhzhang/p/11375574.html</a></p>
</dd></dl>

</section>
<section id="get-update-kwargs">
<h3>get_update_kwargs<a class="headerlink" href="#get-update-kwargs" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.get_update_kwargs">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">get_update_kwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.get_update_kwargs" title="Permalink to this definition"></a></dt>
<dd><p>取出并更新kwargs中key参数的值</p>
<p>使用场景：当一个函数接受**kwargs参数，同时需要对kwargs里面的某个key的值进行更新并且
提取出来单独传参</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – kwargs中待取出并更新的关键字</p></li>
<li><p><strong>arg</strong> – 关键字key对应的新值</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – 关键字参数对</p></li>
<li><p><strong>arg_default</strong> (<em>key关键词对应参数默认值</em>) – </p></li>
<li><p><strong>func_update</strong> (<em>None</em><em>, </em><em>False</em><em>, </em><em>function</em>) – <p>自定义取出的key参数值更新函数: arg_new = func_update(arg, arg_old)</p>
<ul>
<li><p>若为False, 则不更新，直接取出原来key对应的参数值或默认值</p></li>
<li><p>若为`replace`, 则直接替换更新</p></li>
<li><p>若为None, 则 <strong>默认</strong> 更新方式为:</p>
<blockquote>
<div><ul class="simple">
<li><p>若参数值arg为dict或list类型，则增量更新</p></li>
<li><p>若参数值arg_old为list且arg不为list，则增量更新</p></li>
<li><p>其它情况直接替换更新</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>arg_new</em> – 取出并更新之后的关键字key对应参数值</p></li>
<li><p><em>kwargs</em> – 删除key之后的kwargs</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;aa&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_update_kwargs</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="go">(&#39;aa&#39;, {&#39;b&#39;: &#39;b&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;a_&#39;</span><span class="p">:</span> <span class="s1">&#39;aa__&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;aa&#39;</span><span class="p">},</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_update_kwargs</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="go">({&#39;a&#39;: &#39;aa&#39;, &#39;a_&#39;: &#39;aa__&#39;}, {&#39;b&#39;: &#39;b&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aa&#39;</span><span class="p">,</span> <span class="s1">&#39;aa_&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_update_kwargs</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="go">([&#39;a&#39;, &#39;aa&#39;, &#39;aa_&#39;], {&#39;b&#39;: &#39;b&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aa&#39;</span><span class="p">,</span> <span class="s1">&#39;aa_&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_update_kwargs</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">func_update</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
<span class="go">([&#39;aa&#39;, &#39;aa_&#39;], {&#39;b&#39;: &#39;b&#39;})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;aa_&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_update_kwargs</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="go">([&#39;a&#39;, &#39;aa_&#39;], {&#39;b&#39;: &#39;b&#39;})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="roulette-base">
<h3>roulette_base<a class="headerlink" href="#roulette-base" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.roulette_base">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">roulette_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitness</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.roulette_base" title="Permalink to this definition"></a></dt>
<dd><p>基本轮盘赌法</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fitness</strong> (<em>list</em>) – <p>所有备选对象的fitness值列表</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>fitness的元素值应为正，且fitness值越大，被选中概率越大</p>
</div>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>int</cite> - 返回被选中对象的索引号</p>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://blog.csdn.net/armwangEric/article/details/50775206">https://blog.csdn.net/armwangEric/article/details/50775206</a></p>
</dd></dl>

</section>
<section id="roulette-stochastic-accept">
<h3>roulette_stochastic_accept<a class="headerlink" href="#roulette-stochastic-accept" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.roulette_stochastic_accept">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">roulette_stochastic_accept</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitness</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.roulette_stochastic_accept" title="Permalink to this definition"></a></dt>
<dd><p>轮盘赌法，随机接受法</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fitness</strong> (<em>list</em>) – <p>所有备选对象的fitness值列表</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>fitness的元素值应为正，且fitness值越大，被选中概率越大</p>
</div>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>int</cite> - 返回被选中对象的索引号</p>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://blog.csdn.net/armwangEric/article/details/50775206">https://blog.csdn.net/armwangEric/article/details/50775206</a></p>
</dd></dl>

</section>
<section id="roulette-count">
<h3>roulette_count<a class="headerlink" href="#roulette-count" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.roulette_count">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">roulette_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rand_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.roulette_count" title="Permalink to this definition"></a></dt>
<dd><p>轮盘赌法n次模拟，返回每个备选对象在n次模拟中被选中的次数</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fitness</strong> (<em>list</em><em>, </em><em>dict</em>) – <p>所有备选对象的fitness值列表或字典，格式参见Example</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>fitness的元素值应为正，且fitness值越大，被选中概率越大</p>
</div>
</p></li>
<li><p><strong>n</strong> (<em>int</em>) – 模拟次数</p></li>
<li><p><strong>rand_func</strong> (<em>None</em><em>, </em><em>function</em>) – <div class="line-block">
<div class="line">指定轮盘赌法函数，如’roulette_base’(<a class="reference internal" href="#dramkit.gentools.roulette_base" title="dramkit.gentools.roulette_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.roulette_base()</span></code></a>)</div>
<div class="line">或’roulette_stochastic_accept’(<a class="reference internal" href="#dramkit.gentools.roulette_stochastic_accept" title="dramkit.gentools.roulette_stochastic_accept"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.roulette_stochastic_accept()</span></code></a>),</div>
<div class="line">默认用’roulette_stochastic_accept’</div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list, dict</cite> - 返回每个对象在模拟n次中被选中的次数</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fitness</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roulette_count</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">6000</span><span class="p">)</span>
<span class="go">[(0, 991), (1, 2022), (2, 2987)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fitness</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roulette_count</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">6000</span><span class="p">)</span>
<span class="go">[(0, 1003), (1, 1991), (2, 3006)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fitness</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roulette_count</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">6000</span><span class="p">)</span>
<span class="go">[(&#39;a&#39;, 997), (&#39;b&#39;, 1989), (&#39;c&#39;, 3014)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fitness</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roulette_count</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">6000</span><span class="p">)</span>
<span class="go">[(&#39;a&#39;, 1033), (&#39;b&#39;, 1967), (&#39;c&#39;, 3000)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fitness</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roulette_count</span><span class="p">(</span><span class="n">fitness</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">6000</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 988, &#39;b&#39;: 1971, &#39;c&#39;: 3041}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rand-sum">
<h3>rand_sum<a class="headerlink" href="#rand-sum" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.rand_sum">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">rand_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_sum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_dot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.rand_sum" title="Permalink to this definition"></a></dt>
<dd><p>在指定最大最小值范围内随机选取若干个随机数，所选取数之和为定值</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_sum</strong> (<em>int</em><em>, </em><em>float</em>) – 目标和</p></li>
<li><p><strong>n</strong> (<em>int</em>) – 随机选取个数</p></li>
<li><p><strong>lowests</strong> (<em>int</em><em>, </em><em>floot</em><em>, </em><em>list</em>) – 随机数下限值，若为list，则其第k个元素对应第k个随机数的下限</p></li>
<li><p><strong>highests</strong> (<em>int</em><em>, </em><em>floot</em><em>, </em><em>list</em>) – 随机数上限值，若为list，则其第k关元素对应第k个随机数的上限</p></li>
<li><p><strong>isint</strong> (<em>bool</em>) – <p>所选数是否强制为整数，若为False，则为实数</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>若输入lowests或highests不是int，则isint为True无效</p>
</div>
</p></li>
<li><p><strong>n_dot</strong> (<em>int</em>) – 动态上下界值与上下限比较时控制小数位数(为了避免python精度问题导致的报错)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list</cite> - 随机选取的n个数，其和为target_sum</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rand_sum</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">[65, 35]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_sum</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">[41, 59]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_sum</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
<span class="go">[73, 27]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rand-weight-sum">
<h3>rand_weight_sum<a class="headerlink" href="#rand-weight-sum" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.rand_weight_sum">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">rand_weight_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight_sum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lowests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_dot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.rand_weight_sum" title="Permalink to this definition"></a></dt>
<dd><p>在指定最大最小值范围内随机选取若干个随机数，所选取数之加权和为定值</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weight_sum</strong> (<em>float</em>) – 目标加权和</p></li>
<li><p><strong>n</strong> (<em>int</em>) – 随机选取个数</p></li>
<li><p><strong>lowests</strong> (<em>int</em><em>, </em><em>floot</em><em>, </em><em>list</em>) – 随机数下限值，若为list，则其第k个元素对应第k个随机数的下限</p></li>
<li><p><strong>highests</strong> (<em>int</em><em>, </em><em>floot</em><em>, </em><em>list</em>) – 随机数上限值，若为list，则其第k关元素对应第k个随机数的上限</p></li>
<li><p><strong>weights</strong> (<em>None</em><em>, </em><em>list</em>) – <p>权重列表</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>lowests和highests与weights应一一对应</p>
</div>
</p></li>
<li><p><strong>n_dot</strong> (<em>int</em>) – 动态上下界值与上下限比较时控制小数位数(为了避免python精度问题导致的报错)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list</cite> - 随机选取的n个数，其以weights为权重的加权和为weight_sum</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rand_weight_sum</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">[21.41082008017613, 98.58917991982386]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_weight_sum</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">[56.867261610484356, 83.13273838951565]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_weight_sum</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
<span class="go">[80.32071140116187, 79.67928859883813]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_weight_sum</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">])</span>
<span class="go">[88.70409567475888, 66.94385648786168]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_weight_sum</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">[23.080418085462018, 55.37937287180697]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="replace-repeat-iter">
<h3>replace_repeat_iter<a class="headerlink" href="#replace-repeat-iter" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.replace_repeat_iter">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">replace_repeat_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.replace_repeat_iter" title="Permalink to this definition"></a></dt>
<dd><p>替换序列中重复出现的值</p>
<div class="line-block">
<div class="line">series (<cite>pd.Series</cite>) 中若步长为gap的范围内出现多个val值，则只保留第一条记录，</div>
<div class="line">后面的替换为val0</div>
<div class="line">若gap为None，则将连续出现的val值只保留第一个，其余替换为val0(这里连续出现val是指</div>
<div class="line">不出现除了val和val0之外的其他值)</div>
</div>
<p>返回结果为替换之后的series (<cite>pd.Series</cite>)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;test_rep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">replace_repeat_iter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">    test  test_rep</span>
<span class="go">0      0         0</span>
<span class="go">1      1         1</span>
<span class="go">2      1         0</span>
<span class="go">3      0         0</span>
<span class="go">4     -1        -1</span>
<span class="go">5     -1        -1</span>
<span class="go">6      2         2</span>
<span class="go">7     -1        -1</span>
<span class="go">8      1         1</span>
<span class="go">9      0         0</span>
<span class="go">10     1         0</span>
<span class="go">11     1         0</span>
<span class="go">12     1         0</span>
<span class="go">13     0         0</span>
<span class="go">14     0         0</span>
<span class="go">15    -1        -1</span>
<span class="go">16    -1        -1</span>
<span class="go">17     0         0</span>
<span class="go">18     0         0</span>
<span class="go">19     1         1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">replace_repeat_iter</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">0   -1</span>
<span class="go">1    1</span>
<span class="go">2   -1</span>
<span class="go">3    0</span>
<span class="go">4    1</span>
<span class="go">5    0</span>
<span class="go">6    0</span>
<span class="go">7    0</span>
<span class="go">8   -1</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="replace-repeat-pd">
<h3>replace_repeat_pd<a class="headerlink" href="#replace-repeat-pd" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.replace_repeat_pd">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">replace_repeat_pd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.replace_repeat_pd" title="Permalink to this definition"></a></dt>
<dd><p>替换序列中重复出现的值, 仅保留第一个</p>
<p>函数功能，参数和意义同 <a class="reference internal" href="#dramkit.gentools.replace_repeat_iter" title="dramkit.gentools.replace_repeat_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.replace_repeat_iter()</span></code></a>
区别在于计算时在pandas.DataFrame里面进行而不是采用迭代方式，同时取消了gap
参数(即连续出现的val值只保留第一个)</p>
</dd></dl>

</section>
<section id="replace-repeat-func-iter">
<h3>replace_repeat_func_iter<a class="headerlink" href="#replace-repeat-func-iter" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.replace_repeat_func_iter">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">replace_repeat_func_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_val0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.replace_repeat_func_iter" title="Permalink to this definition"></a></dt>
<dd><p>替换序列中重复出现的值，功能与 <a class="reference internal" href="#dramkit.gentools.replace_repeat_iter" title="dramkit.gentools.replace_repeat_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.replace_repeat_iter()</span></code></a>
类似，只不过把val和val0的值由直接指定换成了由指定函数生成</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">func_val</span></code> 函数用于判断连续条件，其返回值只能是True或False，</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">func_val0</span></code> 函数用于生成替换的新值。</div>
<div class="line">即series中若步长为gap的范围内出现多个满足func_val函数为True的值，</div>
<div class="line">则只保留第一条记录，后面的替换为函数func_val0的值。</div>
<div class="line">若gap为None，则将连续出现的满足func_val函数为True的值只保留第一个，其余替换为函数</div>
<div class="line">func_val0的值(这里连续出现是指不出现除了满足func_val为True和等于func_val0函数值</div>
<div class="line">之外的其他值)</div>
</div>
<p>返回结果为替换之后的series (<cite>pd.Series</cite>)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y_rep&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">replace_repeat_func_iter</span><span class="p">(</span>
<span class="gp">... </span>                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">gap</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">    y  y_rep</span>
<span class="go">0   0      0</span>
<span class="go">1   1      1</span>
<span class="go">2   1      1</span>
<span class="go">3   0      0</span>
<span class="go">4  -1      3</span>
<span class="go">5  -1      3</span>
<span class="go">6   2      2</span>
<span class="go">7  -1     -1</span>
<span class="go">8   1      1</span>
<span class="go">9   0      0</span>
<span class="go">10  1      1</span>
<span class="go">11  1      1</span>
<span class="go">12  1      1</span>
<span class="go">13  0      0</span>
<span class="go">14  0      3</span>
<span class="go">15 -1      3</span>
<span class="go">16 -1      3</span>
<span class="go">17  0      3</span>
<span class="go">18  0      3</span>
<span class="go">19  1      1</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="replace-repeat-func-pd">
<h3>replace_repeat_func_pd<a class="headerlink" href="#replace-repeat-func-pd" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.replace_repeat_func_pd">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">replace_repeat_func_pd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_val0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.replace_repeat_func_pd" title="Permalink to this definition"></a></dt>
<dd><p>替换序列中重复出现的值, 仅保留第一个</p>
<div class="line-block">
<div class="line">函数功能，参数和意义同 <a class="reference internal" href="#dramkit.gentools.replace_repeat_func_iter" title="dramkit.gentools.replace_repeat_func_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.replace_repeat_func_iter()</span></code></a></div>
<div class="line">区别在于计算时在pandas.DataFrame里面进行而不是采用迭代方式</div>
<div class="line">同时取消了gap参数(即连续出现的满足func_val为True的值只保留第一个)</div>
</div>
</dd></dl>

</section>
<section id="con-count">
<h3>con_count<a class="headerlink" href="#con-count" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.con_count">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">con_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">via_pd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.con_count" title="Permalink to this definition"></a></dt>
<dd><p>计算series(pd.Series)中连续满足func_cond函数指定的条件的记录数</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pd.Series</em>) – 目标序列</p></li>
<li><p><strong>func_cond</strong> (<em>function</em>) – 指定条件的函数，func_cond(x)返回结果只能为True或False</p></li>
<li><p><strong>via_pd</strong> (<em>bool</em>) – 若via_pd为False，则计算时使用循环迭代，否则在pandas.DataFrame里面进行计算</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>pd.Series</cite> - 返回连续计数结果</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_cond</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;count1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">con_count</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">],</span> <span class="n">func_cond</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">   series  count1</span>
<span class="go">0       0       0</span>
<span class="go">1       0       0</span>
<span class="go">2       1       1</span>
<span class="go">3       1       2</span>
<span class="go">4       0       0</span>
<span class="go">5       0       0</span>
<span class="go">6       1       1</span>
<span class="go">7       1       2</span>
<span class="go">8       1       3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;count0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">con_count</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">   series  count1  count0</span>
<span class="go">0       0       0       1</span>
<span class="go">1       0       0       2</span>
<span class="go">2       1       1       0</span>
<span class="go">3       1       2       0</span>
<span class="go">4       0       0       1</span>
<span class="go">5       0       0       2</span>
<span class="go">6       1       1       0</span>
<span class="go">7       1       2       0</span>
<span class="go">8       1       3       0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="con-count-ignore">
<h3>con_count_ignore<a class="headerlink" href="#con-count-ignore" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.con_count_ignore">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">con_count_ignore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">via_pd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.con_count_ignore" title="Permalink to this definition"></a></dt>
<dd><p>在 <a class="reference internal" href="#dramkit.gentools.con_count" title="dramkit.gentools.con_count"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.con_count()</span></code></a> 的基础上增加连续性判断条件:</p>
<blockquote>
<div><p>当series中的值满足func_ignore函数值为True时，不影响连续性判断(func_ignore
默认为 <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">isnull(x)</span></code>)</p>
</div></blockquote>
</dd></dl>

</section>
<section id="get-preval-func-cond">
<h3>get_preval_func_cond<a class="headerlink" href="#get-preval-func-cond" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.get_preval_func_cond">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">get_preval_func_cond</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_cond</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.get_preval_func_cond" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">获取上一个满足指定条件的行中col_val列的值，条件为：</div>
<div class="line">该行中col_cond列的值x满足func_cond(x)为True (func_cond(x)返回结果只能为True或False)</div>
<div class="line">返回结果为 <cite>pd.Series</cite></div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                     <span class="s1">&#39;x2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;x1_pre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_preval_func_cond</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">    x1  x2  x1_pre</span>
<span class="go">0    0   0     NaN</span>
<span class="go">1    1   1     0.0</span>
<span class="go">2    1   1     0.0</span>
<span class="go">3    0   0     0.0</span>
<span class="go">4   -1  -1     0.0</span>
<span class="go">5   -1  -1    -1.0</span>
<span class="go">6    2   1    -1.0</span>
<span class="go">7   -1  -1    -1.0</span>
<span class="go">8    1   1    -1.0</span>
<span class="go">9    0   0    -1.0</span>
<span class="go">10   1   1     0.0</span>
<span class="go">11   1   1     0.0</span>
<span class="go">12   1   1     0.0</span>
<span class="go">13   0   0     0.0</span>
<span class="go">14   0   0     0.0</span>
<span class="go">15  -1  -1     0.0</span>
<span class="go">16  -1  -1    -1.0</span>
<span class="go">17   0   0    -1.0</span>
<span class="go">18   0   0     0.0</span>
<span class="go">19   1   1     0.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="gap-count">
<h3>gap_count<a class="headerlink" href="#gap-count" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.gap_count">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">gap_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">via_pd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.gap_count" title="Permalink to this definition"></a></dt>
<dd><p>计算series (<cite>pd.Series</cite>)中当前行距离上一个满足 <code class="docutils literal notranslate"><span class="pre">func_cond</span></code> 函数指定条件记录的行数</p>
<p>func_cond为指定条件的函数，func_cond(x)返回结果只能为True或False，
若via_pd为False，则使用循环迭代，若via_pd为True，则在pandas.DataFrme内计算
返回结果为 <cite>pd.Series</cite></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_cond</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gap1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gap_count</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">],</span> <span class="n">func_cond</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">   series  gap1</span>
<span class="go">0       0     0</span>
<span class="go">1       1     0</span>
<span class="go">2       1     1</span>
<span class="go">3       0     1</span>
<span class="go">4       0     2</span>
<span class="go">5       1     3</span>
<span class="go">6       1     1</span>
<span class="go">7       1     1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;gap0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gap_count</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;series&#39;</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">   series  gap1  gap0</span>
<span class="go">0       0     0     0</span>
<span class="go">1       1     0     1</span>
<span class="go">2       1     1     2</span>
<span class="go">3       0     1     3</span>
<span class="go">4       0     2     1</span>
<span class="go">5       1     3     1</span>
<span class="go">6       1     1     2</span>
<span class="go">7       1     1     3</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="count-between-gap">
<h3>count_between_gap<a class="headerlink" href="#count-between-gap" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.count_between_gap">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">count_between_gap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">via_pd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.count_between_gap" title="Permalink to this definition"></a></dt>
<dd><p>计算data (<cite>pandas.DataFrame</cite>)中当前行与上一个满足 <code class="docutils literal notranslate"><span class="pre">func_gap</span></code> 函数为True的行之间，
满足 <code class="docutils literal notranslate"><span class="pre">func_count</span></code> 函数为True的记录数</p>
<div class="line-block">
<div class="line">函数func_gap作用于 <code class="docutils literal notranslate"><span class="pre">col_gap</span></code> 列，func_count作用于 <code class="docutils literal notranslate"><span class="pre">col_count</span></code> 列，
两者返回值均为True或False</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">count_now_gap</span></code> 设置满足func_gap的行是否参与计数，若为False，
则该行计数为0，若为True，则该行按照上一次计数的最后一次计数处理</div>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>增加count_now_gap的处理方式：</p>
<ul class="simple">
<li><p>该行计数为0</p></li>
<li><p>该行按上一次计数的最后一次计数处理</p></li>
<li><p>该行按下一次计数的第一次计数处理</p></li>
</ul>
</div>
<p><code class="docutils literal notranslate"><span class="pre">count_now</span></code> 设置当当前行满足func_count时，从当前行开始对其计数还是从下一行开始对其计数</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>注：当前行若满足同时满足func_gap和func_count，对其计数的行不会为下一行
(即要么不计数，要么在当前行对其计数)</p>
</div>
<p>若via_pd为True，则调用 <a class="reference internal" href="#dramkit.gentools.count_between_gap_pd" title="dramkit.gentools.count_between_gap_pd"><code class="xref py py-func docutils literal notranslate"><span class="pre">count_between_gap_pd()</span></code></a> 实现，否则用 <a class="reference internal" href="#dramkit.gentools.count_between_gap_iter" title="dramkit.gentools.count_between_gap_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">count_between_gap_iter()</span></code></a></p>
<p>返回结果为 <cite>pd.Series</cite></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;to_gap&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                     <span class="s1">&#39;to_count&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;gap_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_between_gap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;to_gap&#39;</span><span class="p">,</span> <span class="s1">&#39;to_count&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                      <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                                      <span class="n">count_now_gap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">count_now</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">        to_gap  to_count  gap_count</span>
<span class="go">0        0         0          0</span>
<span class="go">1        1         1          0</span>
<span class="go">2        1         1          0</span>
<span class="go">3        0         0          0</span>
<span class="go">4       -1        -1          0</span>
<span class="go">5       -1        -1          0</span>
<span class="go">6        2         1          0</span>
<span class="go">7       -1        -1          0</span>
<span class="go">8        1         1          0</span>
<span class="go">9        0         0          1</span>
<span class="go">10      -1         1          0</span>
<span class="go">11       1         1          0</span>
<span class="go">12       1         1          1</span>
<span class="go">13       0         0          2</span>
<span class="go">14       0         0          2</span>
<span class="go">15      -1        -1          0</span>
<span class="go">16      -1        -1          0</span>
<span class="go">17       0         0          0</span>
<span class="go">18       0         0          0</span>
<span class="go">19       1         1          0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;to_gap&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="go">                                    1, 0, 0, -1, -1, 0, 0, 1, -1, -1],</span>
<span class="go">                         &#39;to_count&#39;: [0, 1, 1, 0, -1, -1, 1, -1, 1, 0, 1,</span>
<span class="go">                                      1, 1, 0, 0, -1, 1, 0, 1, 1, 1, 1]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;gap_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_between_gap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;to_gap&#39;</span><span class="p">,</span> <span class="s1">&#39;to_count&#39;</span><span class="p">,</span>
<span class="go">                                          lambda x: x == -1, lambda x: x == 1,</span>
<span class="go">                                          count_now_gap=False, count_now=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">        to_gap  to_count  gap_count</span>
<span class="go">0        0         0          0</span>
<span class="go">1        1         1          0</span>
<span class="go">2        1         1          0</span>
<span class="go">3        0         0          0</span>
<span class="go">4       -1        -1          0</span>
<span class="go">5       -1        -1          0</span>
<span class="go">6        2         1          1</span>
<span class="go">7       -1        -1          0</span>
<span class="go">8        1         1          1</span>
<span class="go">9        0         0          1</span>
<span class="go">10      -1         1          0</span>
<span class="go">11       1         1          1</span>
<span class="go">12       1         1          2</span>
<span class="go">13       0         0          2</span>
<span class="go">14       0         0          2</span>
<span class="go">15      -1        -1          0</span>
<span class="go">16      -1         1          0</span>
<span class="go">17       0         0          0</span>
<span class="go">18       0         1          1</span>
<span class="go">19       1         1          2</span>
<span class="go">20      -1         1          0</span>
<span class="go">21      -1         1          0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;to_gap&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="go">                                    1, 0, 0, -1, -1, 0, 0, 1, -1, -1],</span>
<span class="go">                         &#39;to_count&#39;: [0, -1, -1, 0, -1, -1, 1, -1, 1, 0, 1, 1,</span>
<span class="go">                                      1, 0, 0, -1, -1, 0, -1, 1, 1, 1]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;gap_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_between_gap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;to_gap&#39;</span><span class="p">,</span> <span class="s1">&#39;to_count&#39;</span><span class="p">,</span>
<span class="go">                                          lambda x: x == -1, lambda x: x == 1,</span>
<span class="go">                                          count_now_gap=True, count_now=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">        to_gap  to_count  gap_count</span>
<span class="go">0        0         0          0</span>
<span class="go">1        1        -1          0</span>
<span class="go">2        1        -1          0</span>
<span class="go">3        0         0          0</span>
<span class="go">4       -1        -1          0</span>
<span class="go">5       -1        -1          0</span>
<span class="go">6        2         1          0</span>
<span class="go">7       -1        -1          1</span>
<span class="go">8        1         1          0</span>
<span class="go">9        0         0          1</span>
<span class="go">10      -1         1          1</span>
<span class="go">11       1         1          0</span>
<span class="go">12       1         1          1</span>
<span class="go">13       0         0          2</span>
<span class="go">14       0         0          2</span>
<span class="go">15      -1        -1          2</span>
<span class="go">16      -1        -1          0</span>
<span class="go">17       0         0          0</span>
<span class="go">18       0        -1          0</span>
<span class="go">19       1         1          0</span>
<span class="go">20      -1         1          1</span>
<span class="go">21      -1         1          0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;to_gap&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
<span class="go">                                    1, 0, 0, -1, -1, 0, 0, 1, -1, -1],</span>
<span class="go">                         &#39;to_count&#39;: [0, -1, -1, 0, -1, -1, 1, -1, 1, 0, 1, 1,</span>
<span class="go">                                      1, 0, 0, -1, -1, 0, -1, 1, 1, 1]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;gap_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_between_gap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;to_gap&#39;</span><span class="p">,</span> <span class="s1">&#39;to_count&#39;</span><span class="p">,</span>
<span class="go">                                          lambda x: x == -1, lambda x: x == 1,</span>
<span class="go">                                          count_now_gap=True, count_now=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">        to_gap  to_count  gap_count</span>
<span class="go">0        0         0          0</span>
<span class="go">1        1        -1          0</span>
<span class="go">2        1        -1          0</span>
<span class="go">3        0         0          0</span>
<span class="go">4       -1        -1          0</span>
<span class="go">5       -1        -1          0</span>
<span class="go">6        2         1          1</span>
<span class="go">7       -1        -1          1</span>
<span class="go">8        1         1          1</span>
<span class="go">9        0         0          1</span>
<span class="go">10      -1         1          2</span>
<span class="go">11       1         1          1</span>
<span class="go">12       1         1          2</span>
<span class="go">13       0         0          2</span>
<span class="go">14       0         0          2</span>
<span class="go">15      -1        -1          2</span>
<span class="go">16      -1        -1          0</span>
<span class="go">17       0         0          0</span>
<span class="go">18       0        -1          0</span>
<span class="go">19       1         1          1</span>
<span class="go">20      -1         1          2</span>
<span class="go">21      -1         1          1</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="count-between-gap-pd">
<h3>count_between_gap_pd<a class="headerlink" href="#count-between-gap-pd" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.count_between_gap_pd">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">count_between_gap_pd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.count_between_gap_pd" title="Permalink to this definition"></a></dt>
<dd><p>参数和功能说明见 <a class="reference internal" href="#dramkit.gentools.count_between_gap" title="dramkit.gentools.count_between_gap"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.count_between_gap()</span></code></a> 函数</p>
</dd></dl>

</section>
<section id="count-between-gap-iter">
<h3>count_between_gap_iter<a class="headerlink" href="#count-between-gap-iter" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.count_between_gap_iter">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">count_between_gap_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_gap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.count_between_gap_iter" title="Permalink to this definition"></a></dt>
<dd><p>参数和功能说明见 <a class="reference internal" href="#dramkit.gentools.count_between_gap" title="dramkit.gentools.count_between_gap"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.count_between_gap()</span></code></a> 函数</p>
</dd></dl>

</section>
<section id="val-gap-cond">
<h3>val_gap_cond<a class="headerlink" href="#val-gap-cond" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.val_gap_cond">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">val_gap_cond</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_cond</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_cal_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_to_cal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contain_1st</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.val_gap_cond" title="Permalink to this definition"></a></dt>
<dd><p>计算data (<cite>pandas.DataFrame</cite>)中从上一个 <code class="docutils literal notranslate"><span class="pre">col_cond</span></code> 列满足 <code class="docutils literal notranslate"><span class="pre">func_cond</span></code> 函数的行
到当前行, <code class="docutils literal notranslate"><span class="pre">col_val</span></code> 列记录的 <code class="docutils literal notranslate"><span class="pre">func_val</span></code> 函数值</p>
<div class="line-block">
<div class="line">func_cond作用于col_cond列，func_cond(x)返回True或False，x为单个值</div>
<div class="line">func_val函数作用于col_val列，func_val(x)返回单个值，x为np.array或pd.Series或列表等</div>
<div class="line">func_to_cal作用于to_cal_col列，只有当前行func_to_cal值为True时才进行func_val计算，
否则返回结果中当前行值设置为val_nan</div>
<div class="line">contain_1st设置func_val函数计算时是否将上一个满足func_cond的行也纳入计算</div>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>参考 <a class="reference internal" href="#dramkit.gentools.count_between_gap" title="dramkit.gentools.count_between_gap"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.count_between_gap()</span></code></a> 的设置:</p>
<ul class="simple">
<li><p>设置col_cond列满足func_cond函数的行，其参与func_val函数的前一次计算还是下一次计算还是不参与计算</p></li>
</ul>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span> <span class="p">,</span><span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>                     <span class="s1">&#39;sig&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;val_pre1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">val_gap_cond</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;sig&#39;</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">   val  sig  val_pre1</span>
<span class="go">0    1    1       NaN</span>
<span class="go">1    2    1       NaN</span>
<span class="go">2    5   -1       NaN</span>
<span class="go">3    3    1       3.0</span>
<span class="go">4    1    1       3.0</span>
<span class="go">5    7   -1       7.0</span>
<span class="go">6    9    1       9.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="filter-by-func-prenext">
<h3>filter_by_func_prenext<a class="headerlink" href="#filter-by-func-prenext" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.filter_by_func_prenext">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">filter_by_func_prenext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_prenext</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.filter_by_func_prenext" title="Permalink to this definition"></a></dt>
<dd><p>对 <code class="docutils literal notranslate"><span class="pre">l</span></code> (<cite>list</cite>)进行过滤，过滤后返回的 <code class="docutils literal notranslate"><span class="pre">lnew</span></code> (<cite>list</cite>)任意前后相邻两个元素满足:</p>
<blockquote>
<div><p>func_prenext(lnew[i], lnew[i+1]) = True</p>
</div></blockquote>
<p>过滤过程为：将 <code class="docutils literal notranslate"><span class="pre">l</span></code> 的第一个元素作为起点，找到其后第一个满足 <code class="docutils literal notranslate"><span class="pre">func_prenext</span></code> 函数
值为True的元素，再以该元素为起点往后寻找…</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_prenext</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">func_prenext</span><span class="p">)</span>
<span class="go">[1, 3, 6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">func_prenext</span><span class="p">)</span>
<span class="go">[1, 3, 5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span> <span class="o">==</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_prenext</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">func_prenext</span><span class="p">)</span>
<span class="go">[(1, 2), (2, 3)]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="filter-by-func-prenext-series">
<h3>filter_by_func_prenext_series<a class="headerlink" href="#filter-by-func-prenext-series" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.filter_by_func_prenext_series">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">filter_by_func_prenext_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_prenext</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.filter_by_func_prenext_series" title="Permalink to this definition"></a></dt>
<dd><p>对series (<cite>pandas.Series</cite>)调用 <code class="docutils literal notranslate"><span class="pre">filter_by_func_prenext</span></code> 函数进行过滤，
其中满足 <code class="docutils literal notranslate"><span class="pre">func_ignore</span></code> 函数为True的值不参与过滤，func_ignore函数默认为：
<code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span> <span class="pre">isnull(x)</span></code></p>
<p>series中 <strong>被过滤的值</strong> 在返回结果中用 <code class="docutils literal notranslate"><span class="pre">val_nan</span></code> 替换, <strong>不参与过滤</strong> 的值保持不变</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dramkit.gentools.filter_by_func_prenext" title="dramkit.gentools.filter_by_func_prenext"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.gentools.filter_by_func_prenext()</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func_prenext</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext_series</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">func_prenext</span><span class="p">)</span>
<span class="go">0    1.0</span>
<span class="go">1    NaN</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">4    NaN</span>
<span class="go">5    NaN</span>
<span class="go">6    NaN</span>
<span class="go">7    NaN</span>
<span class="go">8    6.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_by_func_prenext_series</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">func_prenext</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">14    1.0</span>
<span class="go">13    NaN</span>
<span class="go">12    0.0</span>
<span class="go">11    3.0</span>
<span class="go">10    0.0</span>
<span class="go">9     NaN</span>
<span class="go">8     0.0</span>
<span class="go">7     NaN</span>
<span class="go">6     0.0</span>
<span class="go">5     0.0</span>
<span class="go">4     NaN</span>
<span class="go">3     NaN</span>
<span class="go">2     NaN</span>
<span class="go">1     6.0</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="merge-df">
<h3>merge_df<a class="headerlink" href="#merge-df" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.merge_df">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">merge_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_right</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'left'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.merge_df" title="Permalink to this definition"></a></dt>
<dd><p>在 <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code> 上改进，相同列名时自动去除重复的</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_left</strong> (<em>pandas.DataFrame</em>) – 待merge左表</p></li>
<li><p><strong>df_right</strong> (<em>pandas.DataFrame</em>) – 待merge右表</p></li>
<li><p><strong>same_keep</strong> (<em>str</em>) – 可选’left’, ‘right’，设置相同列保留左边df还是右边df</p></li>
<li><p><strong>**kwargs</strong> – pd.merge接受的其他参数</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>pandas.DataFrame</cite> - 返回merge之后的数据表</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="cut-df-by-con-val">
<h3>cut_df_by_con_val<a class="headerlink" href="#cut-df-by-con-val" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.cut_df_by_con_val">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">cut_df_by_con_val</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_eq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.cut_df_by_con_val" title="Permalink to this definition"></a></dt>
<dd><p>根据 <cite>by_col</cite> 列的值，将 <cite>df (pandas.DataFrame)</cite> 切分为多个子集列表，返回 <cite>list</cite></p>
<p>切分依据：<code class="docutils literal notranslate"><span class="pre">func_eq</span></code> 函数作用于 <code class="docutils literal notranslate"><span class="pre">by_col</span></code> 列，函数值连续相等的记录被划分到一个子集中</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="s1">&#39;by_col&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">1</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cut_df_by_con_val</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;by_col&#39;</span><span class="p">)</span>
<span class="go">[   val by_col</span>
<span class="go"> z    0      a</span>
<span class="go"> y    1      a</span>
<span class="go"> x    2      a,</span>
<span class="go">    val by_col</span>
<span class="go"> w    3      b</span>
<span class="go"> v    4      b,</span>
<span class="go">    val by_col</span>
<span class="go"> u    5      c,</span>
<span class="go">    val by_col</span>
<span class="go"> t    6      a</span>
<span class="go"> s    7      a</span>
<span class="go"> r    8      a,</span>
<span class="go">    val by_col</span>
<span class="go"> q    9      d]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-con-start-end">
<h3>get_con_start_end<a class="headerlink" href="#get-con-start-end" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.get_con_start_end">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">get_con_start_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_con</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.get_con_start_end" title="Permalink to this definition"></a></dt>
<dd><p>找出series (<cite>pandas.Series</cite>)中值连续满足 <code class="docutils literal notranslate"><span class="pre">func_con</span></code> 函数值为True的分段起止位置，
返回起止位置对列表</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_ends</span> <span class="o">=</span> <span class="n">get_con_start_end</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_ends</span>
<span class="go">[[7, 8], [11, 11], [17, 17]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_ends</span> <span class="o">=</span> <span class="n">get_con_start_end</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_ends</span>
<span class="go">[[1, 2], [4, 5], [12, 15]]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="cut-range-to-subs">
<h3>cut_range_to_subs<a class="headerlink" href="#cut-range-to-subs" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.cut_range_to_subs">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">cut_range_to_subs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gap</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.cut_range_to_subs" title="Permalink to this definition"></a></dt>
<dd><p>将 <code class="docutils literal notranslate"><span class="pre">range(0,</span> <span class="pre">n)</span></code> 切分成连续相接的子集:
<code class="docutils literal notranslate"><span class="pre">[range(0,</span> <span class="pre">gap),</span> <span class="pre">range(gap,</span> <span class="pre">2*gap),</span> <span class="pre">...]</span></code></p>
</dd></dl>

</section>
<section id="check-l-allin-l0">
<h3>check_l_allin_l0<a class="headerlink" href="#check-l-allin-l0" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.check_l_allin_l0">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">check_l_allin_l0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">l0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.check_l_allin_l0" title="Permalink to this definition"></a></dt>
<dd><p>判断 <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">(list)</span></code> 中的值是否都是 <code class="docutils literal notranslate"><span class="pre">l0</span> <span class="pre">(list)</span></code> 中的元素, 返回True或False</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_l_allin_l0</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l0</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_l_in_l0</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">l0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="check-exist-data">
<h3>check_exist_data<a class="headerlink" href="#check-exist-data" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.check_exist_data">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">check_exist_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.check_exist_data" title="Permalink to this definition"></a></dt>
<dd><p>依据指定的 <code class="docutils literal notranslate"><span class="pre">cols</span></code> 列检查 <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">(pandas.DataFrame)</span></code> 中是否已经存在 <code class="docutils literal notranslate"><span class="pre">x_list</span> <span class="pre">(list)</span></code> 中的记录，
返回list，每个元素值为True或False</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">,</span> <span class="p">],</span> <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">7.1</span><span class="p">]],</span>
<span class="gp">... </span>                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_list</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_exist_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_list</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="go">[False, True]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_exist_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">]],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="go">[True, True]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="isnull">
<h3>isnull<a class="headerlink" href="#isnull" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.isnull">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">isnull</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.isnull" title="Permalink to this definition"></a></dt>
<dd><p>判断x是否为无效值(None, nan, x != x)，若是无效值，返回True，否则返回False</p>
</dd></dl>

</section>
<section id="x-div-y">
<h3>x_div_y<a class="headerlink" href="#x-div-y" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.x_div_y">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">x_div_y</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v_x0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v_y0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v_xy0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.x_div_y" title="Permalink to this definition"></a></dt>
<dd><p>x除以y</p>
<ul class="simple">
<li><p>v_xy0为当x和y同时为0时的返回值</p></li>
<li><p>v_y0为当y等于0时的返回值</p></li>
<li><p>v_x0为当x等于0时的返回值</p></li>
</ul>
</dd></dl>

</section>
<section id="power">
<h3>power<a class="headerlink" href="#power" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.power">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">power</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.power" title="Permalink to this definition"></a></dt>
<dd><p>计算a的b次方，return_real设置是否只返回实属部分</p>
</dd></dl>

</section>
<section id="cal-pct">
<h3>cal_pct<a class="headerlink" href="#cal-pct" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.cal_pct">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">cal_pct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vv00</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vv10</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.cal_pct" title="Permalink to this definition"></a></dt>
<dd><p>计算从v0到v1的百分比变化</p>
<ul class="simple">
<li><p>vv00为当v0的值为0且v1为正时的返回值，v1为负时取负号</p></li>
<li><p>vv10为当v1的值为0且v0为正时的返回值，v0为负时取负号</p></li>
</ul>
</dd></dl>

</section>
<section id="min-com-multer">
<h3>min_com_multer<a class="headerlink" href="#min-com-multer" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.min_com_multer">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">min_com_multer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.min_com_multer" title="Permalink to this definition"></a></dt>
<dd><p>求一列数 <cite>l (list)</cite> 的最小公倍数，支持负数和浮点数</p>
</dd></dl>

</section>
<section id="max-com-divisor">
<h3>max_com_divisor<a class="headerlink" href="#max-com-divisor" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.max_com_divisor">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">max_com_divisor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.max_com_divisor" title="Permalink to this definition"></a></dt>
<dd><p>求一列数 <cite>l (list)</cite> 的最大公约数，只支持正整数</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>只支持正整数</p>
</div>
</dd></dl>

</section>
<section id="mcd2-tad">
<h3>mcd2_tad<a class="headerlink" href="#mcd2-tad" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.mcd2_tad">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">mcd2_tad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.mcd2_tad" title="Permalink to this definition"></a></dt>
<dd><p>辗转相除法求a和b的最大公约数，a、b为正数</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>a, b应为正数</p></li>
<li><p>a, b为小数时由于精度问题会不正确</p></li>
</ul>
</div>
</dd></dl>

</section>
<section id="max-com-divisor-tad">
<h3>max_com_divisor_tad<a class="headerlink" href="#max-com-divisor-tad" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.max_com_divisor_tad">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">max_com_divisor_tad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.max_com_divisor_tad" title="Permalink to this definition"></a></dt>
<dd><p>用辗转相除法求一列数 <cite>l (list)</cite> 的最大公约数, <cite>l</cite> 元素均为正数</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>l元素均为正数</p></li>
<li><p>l元素为小数时由于精度问题会不正确</p></li>
</ul>
</div>
<p class="rubric">References</p>
<p><a class="reference external" href="https://blog.csdn.net/weixin_45069761/article/details/107954905">https://blog.csdn.net/weixin_45069761/article/details/107954905</a></p>
</dd></dl>

</section>
<section id="get-appear-order">
<h3>get_appear_order<a class="headerlink" href="#get-appear-order" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.get_appear_order">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">get_appear_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.get_appear_order" title="Permalink to this definition"></a></dt>
<dd><p>标注series (<cite>pandas.Series</cite> , 离散值)中重复元素是第几次出现，</p>
<p>返回为 <cite>pandas.Series</cite>，ascending设置返回结果是否按出现次序升序排列</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;nth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_appear_order</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">   v  nth</span>
<span class="go">a  A    3</span>
<span class="go">b  B    1</span>
<span class="go">c  A    2</span>
<span class="go">d  A    1</span>
<span class="go">e  C    2</span>
<span class="go">f  C    1</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="label-rep-index-str">
<h3>label_rep_index_str<a class="headerlink" href="#label-rep-index-str" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.label_rep_index_str">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">label_rep_index_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.label_rep_index_str" title="Permalink to this definition"></a></dt>
<dd><p><cite>df (pandas.DataFrame)</cite> 中的index若有重复，对重复的index进行后缀编号，返回新的 <cite>pandas.DataFrame</cite></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>若存在重复的index，则添加后缀编号之后返回的df，其index为str类型</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label_rep_index_str</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">   0</span>
<span class="go">0  1</span>
<span class="go">1  2</span>
<span class="go">2  3</span>
<span class="go">3  4</span>
<span class="go">4  5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label_rep_index_str</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">     0</span>
<span class="go">0    1</span>
<span class="go">0_2  2</span>
<span class="go">1    3</span>
<span class="go">2    4</span>
<span class="go">2_2  5</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="drop-index-duplicates">
<h3>drop_index_duplicates<a class="headerlink" href="#drop-index-duplicates" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.drop_index_duplicates">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">drop_index_duplicates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'first'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.drop_index_duplicates" title="Permalink to this definition"></a></dt>
<dd><p>删除 <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">(pandas.DataFrame)</span></code> 中index重复的记录</p>
</dd></dl>

</section>
<section id="group-shift">
<h3>group_shift<a class="headerlink" href="#group-shift" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.group_shift">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">group_shift</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.group_shift" title="Permalink to this definition"></a></dt>
<dd><p>分组shift，待实现</p>
</dd></dl>

</section>
<section id="group-fillna">
<h3>group_fillna<a class="headerlink" href="#group-fillna" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.group_fillna">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">group_fillna</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_fill</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols_groupby</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs_fillna</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.group_fillna" title="Permalink to this definition"></a></dt>
<dd><p>分组缺失值填充</p>
</dd></dl>

</section>
<section id="group-rank">
<h3>group_rank<a class="headerlink" href="#group-rank" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.group_rank">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">group_rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_rank</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols_groupby</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs_rank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.group_rank" title="Permalink to this definition"></a></dt>
<dd><p>分组排序</p>
<p>对df(<cite>pandas.DataFrame</cite>)中 <code class="docutils literal notranslate"><span class="pre">cols_rank</span></code> 指定列按 <code class="docutils literal notranslate"><span class="pre">cols_groupby</span></code> 指定列分组排序</p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>col_rank可为列表，此时范围dataframe，return_all设置只返回指定列结果或者返回全部dataframe</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – 待排序数据表</p></li>
<li><p><strong>col_rank</strong> (<em>str</em>) – 需要排序的列</p></li>
<li><p><strong>cols_groupby</strong> (<em>str</em><em>, </em><em>list</em>) – 分组依据列</p></li>
<li><p><strong>**kwargs_rank</strong> – pandas中rank函数接受的参数</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>series_rank</strong> – 排序结果</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="bootstrapping">
<h3>bootstrapping<a class="headerlink" href="#bootstrapping" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.bootstrapping">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">bootstrapping</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.bootstrapping" title="Permalink to this definition"></a></dt>
<dd><p>bootstraping, 待实现</p>
</dd></dl>

</section>
<section id="groupby-rolling-func">
<h3>groupby_rolling_func<a class="headerlink" href="#groupby-rolling-func" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.groupby_rolling_func">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">groupby_rolling_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols_groupby</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_rolling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.groupby_rolling_func" title="Permalink to this definition"></a></dt>
<dd><p>data按照cols_groupby分组，然后在cols_val列上rolling调用func，
func的参数通过kwargs_func设定，
若cols_val为str，则返回pd.Series；若为list，则返回pd.DataFrame
若keep_index为True，则返回结果中的index与data一样，否则返回结果中的index由
cols_groupby设定</p>
<p>待实现</p>
</dd></dl>

</section>
<section id="link-lists">
<h3>link_lists<a class="headerlink" href="#link-lists" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.link_lists">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">link_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lists</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.link_lists" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">将多个列表连接成一个列表</div>
<div class="line">注：lists为列表，其每个元素也为一个列表</div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">link_lists</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">])</span>
<span class="go">[1, 2, 3, 4, 5, 6, &#39;a&#39;, &#39;b&#39;, [1, 2, 3], [4, 5, 6]]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="get-num-decimal">
<h3>get_num_decimal<a class="headerlink" href="#get-num-decimal" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.gentools.get_num_decimal">
<span class="sig-prename descclassname"><span class="pre">dramkit.gentools.</span></span><span class="sig-name descname"><span class="pre">get_num_decimal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_tail0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.gentools.get_num_decimal" title="Permalink to this definition"></a></dt>
<dd><div class="line-block">
<div class="line">获取浮点数x的小数位数</div>
<div class="line">ignore_tail0设置是否忽略小数点尾部无效的0</div>
</div>
</dd></dl>

</section>
</section>
<section id="module-dramkit.install_check">
<span id="install-check"></span><h2>install_check<a class="headerlink" href="#module-dramkit.install_check" title="Permalink to this headline"></a></h2>
<section id="id5">
<h3>install_check<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.install_check.install_check">
<span class="sig-prename descclassname"><span class="pre">dramkit.install_check.</span></span><span class="sig-name descname"><span class="pre">install_check</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.install_check.install_check" title="Permalink to this definition"></a></dt>
<dd><p>检查是否成功安装dramkit</p>
<p>若成功安装，会打印版本号和相关提示信息</p>
</dd></dl>

</section>
</section>
<section id="module-dramkit.iotools">
<span id="iotools"></span><h2>iotools<a class="headerlink" href="#module-dramkit.iotools" title="Permalink to this headline"></a></h2>
<section id="pickle-file">
<h3>pickle_file<a class="headerlink" href="#pickle-file" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.pickle_file">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">pickle_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.pickle_file" title="Permalink to this definition"></a></dt>
<dd><p>以二进制格式保存数据data到文件file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – 待保存内容</p></li>
<li><p><strong>file</strong> (<em>str</em>) – 保存路径</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="unpickle-file">
<h3>unpickle_file<a class="headerlink" href="#unpickle-file" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.unpickle_file">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">unpickle_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.unpickle_file" title="Permalink to this definition"></a></dt>
<dd><p>读取二进制格式文件file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> (<em>str</em>) – 待读取文件路径</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="load-json">
<h3>load_json<a class="headerlink" href="#load-json" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.load_json">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">load_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.load_json" title="Permalink to this definition"></a></dt>
<dd><p>读取json格式文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – 待读取文件路径</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>None</em>) – 文件编码格式，若不指定，则尝试用utf-8和gbk编码读取</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em>) – 日志记录器</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>dict</cite> - 返回读取数据</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="write-json">
<h3>write_json<a class="headerlink" href="#write-json" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.write_json">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.write_json" title="Permalink to this definition"></a></dt>
<dd><p>把data写入json格式文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>dict</em>) – 待写入数据</p></li>
<li><p><strong>fpath</strong> (<em>str</em>) – 文件保存路径</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>None</em>) – 文件编码格式</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="read-lines">
<h3>read_lines<a class="headerlink" href="#read-lines" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.read_lines">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">read_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.read_lines" title="Permalink to this definition"></a></dt>
<dd><p>读取文本文件中的所有行</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – 待读取文件路径</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>None</em>) – 文件编码格式，若不指定，则尝试用utf-8和gbk编码读取</p></li>
<li><p><strong>logger</strong> (<em>None</em><em>, </em><em>logging.Logger</em>) – 日志记录器</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list</cite> - 文本文件中每行内容列表</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="write-txt">
<h3>write_txt<a class="headerlink" href="#write-txt" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.write_txt">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">write_txt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.write_txt" title="Permalink to this definition"></a></dt>
<dd><p>将列表lines中的内容写入文本文件中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>list</em>) – 列表，每个元素为一行文本内容</p></li>
<li><p><strong>file</strong> (<em>str</em>) – 保存路径</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – 写入模式，如’w’或’a’</p></li>
<li><p><strong>check_end</strong> (<em>bool</em>) – 是否检查每行行尾换行符，默认若行尾已经有换行符，则不再新添加换行符</p></li>
<li><p><strong>**kwargs</strong> – <code class="docutils literal notranslate"><span class="pre">open</span></code> 函数接受的关键字，如encoding等</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>不同系统文本文件每行默认结尾字符不同:</p>
<blockquote>
<div><ul class="simple">
<li><p>linux下一般以`\n`结尾</p></li>
<li><p>windows下一般以`\r\n`结尾</p></li>
<li><p>苹果系统一般以`\r`结尾</p></li>
</ul>
</div></blockquote>
</div>
</dd></dl>

</section>
<section id="load-text">
<h3>load_text<a class="headerlink" href="#load-text" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.load_text">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">load_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">','</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_first_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_first_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_pd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_last_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.load_text" title="Permalink to this definition"></a></dt>
<dd><p>读取文本文件数据，要求文件中每行存放一个数据样本</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – 文本文件路径</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – 字段分隔符，默认`,`</p></li>
<li><p><strong>del_first_line</strong> (<em>bool</em>) – <p>是否删除首行，默认不删除</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>若del_first_line为True，则输出pandas.DataFrame没有列名</p>
</div>
</p></li>
<li><p><strong>del_first_col</strong> (<em>bool</em>) – 是否删除首列，默认不删除</p></li>
<li><p><strong>to_pd</strong> (<em>bool</em>) – 是否输出为pandas.DataFrame，默认是</p></li>
<li><p><strong>keep_header</strong> (<em>bool</em>) – 输出为pandas.DataFrame时是否以首行作为列名，默认是</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>None</em>) – 指定编码方式，默认不指定时会尝试以uft-8和gbk编码读取</p></li>
<li><p><strong>del_last_col</strong> (<em>bool</em>) – 是否删除最后一列，默认否</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em><em>, </em><em>None</em>) – 日志记录器</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list, pandas.DataFrame</cite> - 返回读取的数据</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="load-csv">
<h3>load_csv<a class="headerlink" href="#load-csv" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.load_csv">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">load_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_unname_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.load_csv" title="Permalink to this definition"></a></dt>
<dd><p>用pandas读取csv数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – csv文件路径</p></li>
<li><p><strong>del_unname_cols</strong> (<em>bool</em>) – 是否删除未命名列，默认删除</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>None</em>) – 指定编码方式，默认不指定，不指定时会尝试以uft-8和gbk编码读取</p></li>
<li><p><strong>logger</strong> (<em>logging.Logger</em><em>, </em><em>None</em>) – 日志记录器</p></li>
<li><p><strong>**kwargs</strong> – 其它 <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> 支持的参数</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>pandas.DataFrame</cite> - 读取的数据</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="load-csvs">
<h3>load_csvs<a class="headerlink" href="#load-csvs" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.load_csvs">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">load_csvs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_duplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs_loadcsv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.load_csvs" title="Permalink to this definition"></a></dt>
<dd><p>读取指定文件夹中所有的csv文件，整合到一个df里面</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fdir</strong> (<em>str</em>) – 文件夹路径</p></li>
<li><p><strong>sort_cols</strong> (<em>None</em><em>, </em><em>str</em><em>, </em><em>list</em>) – 根据sort_cols指定列排序(升序)和去重</p></li>
<li><p><strong>drop_duplicates</strong> (<em>bool</em>) – 是否删除重复值(重复值保留第一条)</p></li>
<li><p><strong>**kwargs_loadcsv</strong> – <a class="reference internal" href="#dramkit.iotools.load_csv" title="dramkit.iotools.load_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.iotools.load_csv()</span></code></a> 接受的其它参数</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>pandas.DataFrame</cite> - 读取的数据</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="load-excels">
<h3>load_excels<a class="headerlink" href="#load-excels" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.load_excels">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">load_excels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_duplicates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs_readexcel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.load_excels" title="Permalink to this definition"></a></dt>
<dd><p>读取指定文件夹中所有的excel文件，整合到一个df里面</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fdir</strong> (<em>str</em>) – 文件夹路径</p></li>
<li><p><strong>sort_cols</strong> (<em>None</em><em>, </em><em>str</em><em>, </em><em>list</em>) – 根据sort_cols指定列排序(升序)和去重</p></li>
<li><p><strong>drop_duplicates</strong> (<em>bool</em>) – 是否删除重复值(重复值保留第一条)</p></li>
<li><p><strong>**kwargs_readexcel</strong> – <code class="docutils literal notranslate"><span class="pre">pd.read_excel</span></code> 接受的其它参数</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>pandas.DataFrame</cite> - 读取的数据</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-all-files">
<h3>get_all_files<a class="headerlink" href="#get-all-files" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.get_all_files">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">get_all_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.get_all_files" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p>获取指定文件夹及其子文件夹中所有的文件路径</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir_path</strong> (<em>str</em>) – 文件夹路径</p></li>
<li><p><strong>ext</strong> (<em>None</em><em>, </em><em>str</em><em>, </em><em>list</em>) – 指定文件后缀列表，若为None，则包含所有类型文件</p></li>
<li><p><strong>include_dir</strong> (<em>bool</em>) – 返回结果中是否包含文件夹路径，默认不包含（即只返回文件路径）</p></li>
<li><p><strong>abspath</strong> (<em>bool</em>) – 是否返回绝对路径，默认返回相对路径</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>list</cite> - 文件路径列表</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="zip-files">
<h3>zip_files<a class="headerlink" href="#zip-files" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_files">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zip_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fpaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_ori_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_zip_new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_files" title="Permalink to this definition"></a></dt>
<dd><p>使用zipfile将指定路径列表(不包括子文件(夹)内容)打包为.zip文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zip_path</strong> (<em>str</em>) – zip压缩包保存路径</p></li>
<li><p><strong>fpaths</strong> (<em>list</em>) – 需要压缩的路径列表(应为相对路径)</p></li>
<li><p><strong>keep_ori_path</strong> (<em>bool</em>) – <ul>
<li><p>若为True, 则压缩文件会保留fpaths中文件的原始路径</p></li>
<li><p>若为False, 则fpaths中所有文件在压缩文件中都在统一根目录下</p></li>
</ul>
</p></li>
<li><p><strong>keep_zip_new</strong> (<em>bool</em>) – 若为True，将覆盖已有压缩文件，否则在已有文件里面新增</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="zip-fpath">
<h3>zip_fpath<a class="headerlink" href="#zip-fpath" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_fpath">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_fpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zip_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_fpath" title="Permalink to this definition"></a></dt>
<dd><p>使用zipfile压缩单个文件(夹)下所有内容为.zip文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – 待压缩文件(夹)路径(应为相对路径)</p></li>
<li><p><strong>zip_path</strong> (<em>None</em><em>, </em><em>str</em>) – 压缩文件保存路径，若为None，则为fpath路径加后缀</p></li>
<li><p><strong>**kwargs</strong> – <a class="reference internal" href="#dramkit.iotools.zip_files" title="dramkit.iotools.zip_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.iotools.zip_files()</span></code></a> 接受的参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="zip-fpaths">
<h3>zip_fpaths<a class="headerlink" href="#zip-fpaths" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_fpaths">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_fpaths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zip_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fpaths</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_fpaths" title="Permalink to this definition"></a></dt>
<dd><p>使用zipfile将指定路径列表(包括子文件(夹)所有内容)打包为.zip文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zip_path</strong> (<em>str</em>) – zip压缩包保存路径</p></li>
<li><p><strong>fpaths</strong> (<em>list</em>) – 需要压缩的路径列表(可为文件也可为文件夹, 应为相对路径)</p></li>
<li><p><strong>**kwargs</strong> – <a class="reference internal" href="#dramkit.iotools.zip_files" title="dramkit.iotools.zip_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">dramkit.iotools.zip_files()</span></code></a> 接受的参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="zip-extract">
<h3>zip_extract<a class="headerlink" href="#zip-extract" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_extract">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_extract</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_extract" title="Permalink to this definition"></a></dt>
<dd><p>用zipfile解压文件，待实现</p>
</dd></dl>

</section>
<section id="zip-fpath-7z">
<h3>zip_fpath_7z<a class="headerlink" href="#zip-fpath-7z" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_fpath_7z">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_fpath_7z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zip_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zip'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_zip_new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_fpath_7z" title="Permalink to this definition"></a></dt>
<dd><p>7z命令压缩单个文件(夹)到.zip文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpath</strong> (<em>str</em>) – 待压缩文件(夹)路径</p></li>
<li><p><strong>zip_path</strong> (<em>None</em><em>, </em><em>str</em>) – 压缩文件保存路径，若为None，则为fpath路径加后缀</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – 压缩文件后缀，可选[‘7z’, ‘zip’]</p></li>
<li><p><strong>pwd</strong> (<em>str</em>) – 密码字符串</p></li>
<li><p><strong>keep_zip_new</strong> (<em>bool</em>) – <ul>
<li><p>若为True，则zip_path将覆盖原来已经存在的文件</p></li>
<li><p>若为False，则zip_path将在原来已有的文件中新增需要压缩的文件</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="zip-fpaths-7z">
<h3>zip_fpaths_7z<a class="headerlink" href="#zip-fpaths-7z" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.zip_fpaths_7z">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">zip_fpaths_7z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zip_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fpaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zip'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_zip_new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.zip_fpaths_7z" title="Permalink to this definition"></a></dt>
<dd><p>7z命令压缩多个文件(夹)列表到.zip文件</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zip_path</strong> (<em>str</em>) – zip压缩包保存路径</p></li>
<li><p><strong>fpaths</strong> (<em>list</em>) – <p>待压缩文件(夹)路径列表</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>fpaths太长的时候可能会报错</p>
</div>
</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – 压缩文件后缀，可选[‘7z’, ‘zip’]</p></li>
<li><p><strong>pwd</strong> (<em>str</em>) – 密码字符串</p></li>
<li><p><strong>keep_zip_new</strong> (<em>bool</em>) – <ul>
<li><p>若为True，则zip_path将覆盖原来已经存在的文件</p></li>
<li><p>若为False，则zip_path将在原来已有的文件中新增需要压缩的文件</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="extract-7z">
<h3>extract_7z<a class="headerlink" href="#extract-7z" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.extract_7z">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">extract_7z</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.extract_7z" title="Permalink to this definition"></a></dt>
<dd><p>7z命令解压文件，待实现</p>
</dd></dl>

</section>
<section id="cmdrun">
<h3>cmdrun<a class="headerlink" href="#cmdrun" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.cmdrun">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">cmdrun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.cmdrun" title="Permalink to this definition"></a></dt>
<dd><p>调用cmd执行cmd_str命令，待实现</p>
</dd></dl>

</section>
<section id="rename-files-in-dir">
<h3>rename_files_in_dir<a class="headerlink" href="#rename-files-in-dir" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.rename_files_in_dir">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">rename_files_in_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_rename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.rename_files_in_dir" title="Permalink to this definition"></a></dt>
<dd><p>对指定文件夹中的文件进行批量重命名</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir_path</strong> (<em>str</em>) – 目标文件夹</p></li>
<li><p><strong>func_rename</strong> (<em>function</em>) – 命名规则函数: name_new = func_rename(name)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="del-dir">
<h3>del_dir<a class="headerlink" href="#del-dir" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.del_dir">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">del_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.del_dir" title="Permalink to this definition"></a></dt>
<dd><p>删除dir_path指定文件夹及其所有内容</p>
</dd></dl>

</section>
<section id="copy-file">
<h3>copy_file<a class="headerlink" href="#copy-file" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.copy_file">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">copy_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.copy_file" title="Permalink to this definition"></a></dt>
<dd><p>复制文件，待实现</p>
</dd></dl>

</section>
<section id="copy-dir">
<h3>copy_dir<a class="headerlink" href="#copy-dir" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.copy_dir">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">copy_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.copy_dir" title="Permalink to this definition"></a></dt>
<dd><p>复制文件夹，待实现</p>
</dd></dl>

</section>
<section id="find-files-include-str">
<h3>find_files_include_str<a class="headerlink" href="#find-files-include-str" title="Permalink to this headline"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="dramkit.iotools.find_files_include_str">
<span class="sig-prename descclassname"><span class="pre">dramkit.iotools.</span></span><span class="sig-name descname"><span class="pre">find_files_include_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dramkit.iotools.find_files_include_str" title="Permalink to this definition"></a></dt>
<dd><p>在指定目录下的文件中，查找那些文件里面包含了目标字符串</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_str</strong> (<em>str</em>) – 目标字符串</p></li>
<li><p><strong>root_dir</strong> (<em>str</em><em>, </em><em>None</em>) – 目标文件夹，目标字符串在此文件夹及其所有子文件内所有文本文件中搜索
若为None，则在os.getcwd()下搜索</p></li>
<li><p><strong>file_types</strong> (<em>None</em><em>, </em><em>str</em><em>, </em><em>list</em>) – <p>指定查找的文件后缀范围:</p>
<ul>
<li><p>None, 在所有文件中查找</p></li>
<li><p>str, 指定一类文件后缀, 如’.py’表示在Python脚本中查找</p></li>
<li><p>list, 指定一个后缀列表, 如[‘.py’, ‘.txt’]</p></li>
</ul>
</p></li>
<li><p><strong>logger</strong> (<em>None</em><em>, </em><em>logging.Logger</em>) – 日志记录器</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>dict</cite> - 返回dict, key为找到的文件路径，value为包含目标字符串的文本内容(仅第一次出现的位置)</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to DramKit’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dramkit.backpacks.html" class="btn btn-neutral float-right" title="backpacks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, YueYong Hu.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>